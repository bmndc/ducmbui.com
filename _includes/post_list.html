{% assign date_format = site.theme_config.date_format | default: "%Y-%m-%d" %}

{%- if include.category -%}
  	{%- assign posts = site.categories[include.category] | sort: 'date' | reverse -%}
{%- else -%}
	{%- assign posts = site.posts | sort: 'date' | reverse -%}
{%- endif -%}

{%- if posts.size > 0 -%}
	{%- for post in posts limit: include.limit -%}
		<article class="post summary">
			<p class="metadata">
				<time class="dateline" datetime="{{ post.date | date_to_xmlschema }}">
					{{ post.date | date: date_format }}
				</time>
				&mdash;
			</p>

			{% if post.title and post.title != "" %}
				<a href="{{ post.url | relative_url }}">{{ post.title | downcase }}</a>
				<p>{{ post.excerpt }}</p>
			{% else %}
				{{ post.content }}
			{% endif %}
		</article>
	{%- endfor -%}

	{%- if include.limit and posts.size > include.limit -%}
		<a class="more">
			<a href="{{ include.show_more_url }}">{{ include.show_more_text | default: "See more..." }}</a>
		</a>
	{%- endif -%}
{%- else -%}
	<p>No posts found.</p>
{%- endif -%}
