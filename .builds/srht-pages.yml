image: debian/stable
oauth: pages.sr.ht/PAGES:RW
packages:
  - ruby-full
  - ruby-dev
  - hut
environment:
  site: ducmbui.com
tasks:
  - install-bundler: |
      gem install bundler
  - build: |
      cd $site
      bundle install
      bundle exec jekyll build
  - package: |
      cd $site/_site
      tar -cvz . > ../../site.tar.gz
  - upload: |
      hut pages publish -d $site site.tar.gz
