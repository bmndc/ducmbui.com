image: debian/stable
oauth: pages.sr.ht/PAGES:RW
packages:
  - ruby-full
  - ruby-dev
  - hut
environment:
  site: ducmbui.com
  BUNDLE_PATH: $HOME/gems
tasks:
  - install-bundler: |
      export PATH=$HOME/gems/bin:$PATH
      gem install bundler
  - build: |
      cd $site
      sudo bundle install
      sudo bundle exec jekyll build
  - package: |
      cd $site/_site
      tar -cvz . > ../../site.tar.gz
  - upload: |
      hut pages publish -d $site site.tar.gz
